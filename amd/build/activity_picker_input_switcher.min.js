define("mod_unilabel/activity_picker_input_switcher",["exports","core/log"],(function(_exports,_log){var obj;
/**
   * unilabel helper for activity picker
   *
   * @author      Andreas Grabs <info@grabs-edv.de>
   * @copyright   2018 onwards Grabs EDV {@link https://www.grabs-edv.de}
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.switchInput=void 0,_log=(obj=_log)&&obj.__esModule?obj:{default:obj};_exports.switchInput=(currentinput,activitylinksrc,url,makedirty,deletestr)=>{const childrenAll=(element,callback)=>{for(const child of element.children)childrenAll(child,callback);callback(element)},makeFormDirty=currentinput=>{currentinput.closest("form").dataset.formDirty=!0};currentinput.value=url,currentinput.type="hidden",currentinput.dataset.initialValue=currentinput.value;let activitylink=activitylinksrc.closest(".activitytitle").cloneNode(!0);_log.default.debug("Remove all links from clone"),childrenAll(activitylink,(e=>{e.removeAttribute("id"),"div"==e.nodeName.toLowerCase()&&e.classList.contains("unilabel-activity-picker-info")&&e.remove(),"a"==e.nodeName.toLowerCase()&&(e.target="_blank",e.classList.remove("stretched-link"))})),activitylink.classList.add("unilabel-input-replacement","border-primary","rounded");let deletelinkcontainer=document.createElement("div"),deletelink=document.createElement("a"),deleteicon=document.createElement("i");deleteicon.classList.add("fa","fa-times","text-danger"),deleteicon.dataset.inputid=currentinput.id,deleteicon.title=deletestr,deletelink.insertAdjacentElement("afterbegin",deleteicon),deletelink.href="#",deletelink.dataset.inputid=currentinput.id,deletelink.title=deletestr,deletelinkcontainer.insertAdjacentElement("afterbegin",deletelink),activitylink.insertAdjacentElement("beforeend",deletelinkcontainer),currentinput.insertAdjacentElement("afterend",activitylink),makedirty&&makeFormDirty(currentinput),deletelink.addEventListener("click",(e=>{e.preventDefault(),activitylink.remove();let currentinput=document.querySelector("#"+e.target.dataset.inputid);currentinput.value="",currentinput.type="text",currentinput.focus(),makeFormDirty(currentinput)}))}}));

//# sourceMappingURL=activity_picker_input_switcher.min.js.map